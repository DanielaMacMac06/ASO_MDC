name: Bash Functions Validation

on:
  pull_request:
    paths:
      - 'scripts/03_functions/**/*.sh'

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v5

      - name: Syntax validation
        run: |
          for file in $(find scripts/03_functions -type f -name "*.sh"); do
            echo "üîç Checking syntax of $file"
            bash -n "$file"
          done

      - name: Shebang verification
        run: |
          for file in $(find scripts/03_functions -type f -name "*.sh"); do
            head -n 1 "$file" | grep -q "#!/bin/bash" \
              || (echo "‚ùå $file: missing or incorrect shebang" && exit 1)
          done
